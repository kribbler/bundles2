(function(e){e.fn.multiGallery=function(p,ob){var rd,sd,td,ud;function vd(a){var b=0,c,d;for(b;b<s;b++)if(b<s-2){if(c=Ia[b],d=Ia[b+1],a>=c&&a<=d){k=b;break}}else if(b==s-1&&(c=Ia[b],a>=c)){k=b;break}}function wd(a){var b=a.length,c="",d=0,f,e;for(d;d<b;d++)if(f=a.charAt(d).toLowerCase(),"\\"==f&&(f="/"),e=f.charCodeAt(0),97<=e&&122>=e||48<=e&&57>=e||0<="_-".indexOf(f))c+=f;return c}function se(){B||(Ya&&clearInterval(Ya),ma&&clearTimeout(ma),Bb(Wb))}function te(){ma&&clearTimeout(ma);Bb(Wb)}function zc(a){a.stopPropagation(); Bb(a)}function Ac(a){a.stopPropagation();Wb=a;B?(ma&&clearTimeout(ma),Ya&&clearInterval(Ya),"KEN_BURNS"!=A?Ya=setInterval(se,ue):Bb(Wb)):Bc?(ma&&clearTimeout(ma),ma=setTimeout(te,ve)):"/"==a.value?(e.address.history(!1),e.address.value(xd),e.address.history()||e.address.history(!0)):yd(a.value)?(e.address.history(!1),e.address.value(xd),e.address.history()||e.address.history(!0)):Bb(a)}function Bb(a){a.stopPropagation();S();na&&clearInterval(na);Bc||(Bc=!0);ua=a.value;"/"==ua.charAt(0)&&(ua=ua.substring(1)); "/"==ua.charAt(ua.length-1)&&(ua=ua.substring(0,ua.length-1));if(!zd(ua))return e.address.history(!1),!1;(void 0==Xb||Xb!=v)&&Za();x()!=pb?(K=pb,Cb(x())):(qb(),va())}function zd(a){a=a.split("/");var b=a[0],c=a[1],d=!1,f=!1,e=0;1==a.length&&(pb=0,f=!0);for(e;e<s;e++)if($a[e].categoryName==b){v=e;d=!0;break}if(!d)return!1;if(!f){e=0;a=$a[v].mediaName;b=a.length;for(e;e<b;e++)if(a[e]==c){pb=e;f=!0;break}}return!d||!f?!1:!0}function Ja(a){return $a[v].categoryName+"/"+$a[v].mediaName[a]}function Yb(){var a; "horizontal"==Ka?(a=oa?h("w"):L.width(),a+=I,l=oa?Math.floor((a-Ad)/(Z+I)):Math.floor(a/(Z+I)),!Cc&&l>ab?l=ab:l>u?l=u:l<Zb&&(l=Zb),M=l*Z+(l-1)*I,oa&&L.css("width",M+"px"),parseInt(P.css("left"),10)):(a=oa?h("h"):L.height(),a+=I,l=oa?Math.floor((a-Ad)/(Ba+I)):Math.floor(a/(Ba+I)),!Cc&&l>ab?l=ab:l>u?l=u:l<Zb&&(l=Zb),M=l*Ba+(l-1)*I,oa&&L.css("height",M+"px"),a=-(u*Ba+(u-1)*I)+M,parseInt(P.css("top"),10)<a&&P.css("top",a+"px"));n+l>u-1&&(n=u-l);Dc();oa&&("horizontal"==Ka?($b?(a=parseInt(L.css("left"), 10),"left"==rb?(L.css("left",ac+"px"),C.css(rb,a-C.width()-$+"px"),fa.css(rb,a+M+$+"px")):(L.css("right",ac+"px"),fa.css(rb,a-C.width()-$+"px"),C.css(rb,a+M+$+"px"))):(a=g.width()/2,L.css("left",a-M/2+"px"),C.css("left",a-M/2-C.width()-$+"px"),fa.css("left",a+M/2+$+"px")),a=parseInt(L.css("top"),10),C.css("top",a+Ba/2-C.height()/2+"px"),fa.css("top",a+Ba/2-fa.height()/2+"px")):($b?"top"==rb?(L.css("top",ac+"px"),a=parseInt(L.css("top"),10),C.css("top",a-C.height()-$+"px"),fa.css("top",a+M+$+"px")): (L.css("bottom",ac+"px"),a=parseInt(L.css("bottom"),10),fa.css("bottom",a-C.height()-$+"px"),C.css("bottom",a+M+$+"px")):(a=g.height()/2,L.css("top",a-M/2+"px"),C.css("top",a-M/2-C.height()-$+"px"),fa.css("top",a+M/2+$+"px")),a=parseInt(L.css("left"),10),C.css("left",a+Z/2-C.width()/2+"px"),fa.css("left",a+Z/2-C.width()/2+"px")))}function Ec(){if(oa&&!Fc){var a;"top"==Q?(a=aa?-g.height()+"px":"0px",g.stop().animate({top:a},{duration:500,easing:"easeOutQuint"})):"bottom"==Q?(a=aa?h("h")+"px":h("h")- g.height()+"px",g.stop().animate({top:a},{duration:500,easing:"easeOutQuint"})):"left"==Q?(a=aa?-g.width()+"px":"0px",g.stop().animate({left:a},{duration:500,easing:"easeOutQuint"})):"right"==Q&&(side="left",a=aa?h("w")+"px":h("w")-g.width()+"px",g.stop().animate({left:a},{duration:500,easing:"easeOutQuint"}));aa?(bb.children("img").attr("src",Bd),aa=!1):(bb.children("img").attr("src",Cd),aa=!0)}}function bc(){oa&&("top"==Q?"inside"==ga?aa?g.css("top","0px"):g.css("top",-g.height()+"px"):(g.css("top", "0px"),F.css("top",g.height()+"px")):"bottom"==Q?"inside"==ga&&(aa?g.css("top",h("h")-g.height()+"px"):g.css("top",h("h")+"px")):"left"==Q?"inside"==ga?aa?g.css("left","0px"):g.css("left",-g.width()+"px"):(g.css("left","0px"),F.css("left",g.width()+"px")):"right"==Q&&("inside"==ga?aa?g.css("left",h("w")-g.width()+"px"):g.css("left",h("w")+"px"):g.css("left",h("w")+"px")))}function Dd(a){if(q&&!t){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("data-id"); if("prevThumbBtn"==a){if(0==n)return;t=!0;n-=l}else if("nextThumbBtn"==a){if(n==u-l)return;t=!0;n+=l}Ed();return!1}}function Ed(){0>n?n=0:n>u-l&&(n=u-l);var a;"horizontal"==Ka?(a=n*Z+n*I,P.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){Dc()}})):(a=n*Ba+n*I,P.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){Dc()}}))}function La(a){C&&("off"==a?C.css("display","none"):C.css("display","block"))}function Ma(a){fa&&("off"==a?fa.css("display", "none"):fa.css("display","block"))}function Dc(){u<=l?(La("off"),Ma("off"),cc=!1):(La("on"),Ma("on"),cc=!0,0==n?La("off"):La("on"),n+l==u?Ma("off"):Ma("on"),t=!1)}function we(a){if(!q||t||"KEN_BURNS"!=A&&B)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("data-id");if(a!=v)return t=!0,Gc(),v=a,T?(e.address.value(Ja(0)),e.address.history()||e.address.history(!0)):Za(),!1}function xe(a){if(q)return a||(a=window.event),a.cancelBubble? a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget),a.attr("data-id"),a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),!1}function ye(a){if(q&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget),a.attr("data-id")!=v))return a.stop().animate({opacity:Hc},{duration:500,easing:"easeOutSine"}),!1}function Gc(){Ic&&Ic.stop().animate({opacity:Hc},{duration:500,easing:"easeOutSine"}).css("cursor","pointer")} function Fd(){var a=Jc[v];a&&(a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}).css("cursor","default"),Ic=a)}function R(a,b){var c=0;for(a;a<b;a++)c+=dc[a]+cb;return c-=cb}function Db(){var a;a="horizontal"==Ca?h("w")-ec:h("h")-ec;var b=0,c=k,d=!0;a:for(;b<a;){c++;if(!Eb&&c-k>Da){c=k+Da;d=!1;b=R(k,c);break a}if(c>s){for(var c=s,d=!1,b=R(k,c),e=!0;b<a;){k--;if(!Eb&&c-k>Da){k=c-Da;e=!1;b=R(k,s);break a}if(0>k){k=0;e=!1;b=R(0,s);break a}b=R(k,s)}e&&(k++,b=R(k,c));break a}b=R(k,c)}d&& (c--,b=R(k,c));a=Ia[k];wa=c-k;"horizontal"==Ca?(J=b,w.css("width",J+"px"),Na?w.css(X,ha+"px"):w.css("left",g.width()/2-J/2+"px"),N.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}})):(J=b,w.css("height",J+"px"),Na?w.css(X,ha+"px"):w.css("top",g.height()/2-J/2+"px"),N.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}));Gd()}function Gd(){if("horizontal"==Ca){var a=parseInt(w.css("top"),10);D.css("top",a+db/2-D.height()/ 2+"px");pa.css("top",a+db/2-D.height()/2+"px");Na?"left"==X?(D.css(X,ha-D.width()-ba+"px"),pa.css(X,ha+parseInt(w.css("width"),10)+ba+"px")):(pa.css(X,ha-D.width()-ba+"px"),D.css(X,ha+parseInt(w.css("width"),10)+ba+"px")):(a=g.width()/2,D.css("left",a-J/2-D.width()-ba+"px"),pa.css("left",a+J/2+ba+"px"))}else a=parseInt(w.css("top"),10),D.css("left",a+Fb/2-D.width()/2+"px"),pa.css("left",a+Fb/2-D.width()/2+"px"),Na?"top"==X?(D.css(X,ha-D.height()-ba+"px"),pa.css(X,ha+parseInt(w.css("height"),10)+ba+ "px")):(pa.css(X,ha-D.height()-ba+"px"),D.css(X,ha+parseInt(w.css("height"),10)+ba+"px")):(a=g.height()/2,D.css("top",a-J/2-D.height()-ba+"px"),pa.css("top",a+J/2+ba+"px"))}function Hd(a){if(q&&!Gb){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("data-id");if("prevMenuBtn"==a){if(0==k)return;Gb=!0;var b;b="horizontal"==Ca?h("w")-ec:h("h")-ec;a=0;var c=k;U=k;var d=!0;a:for(;a<b;){U--;if(!Eb&&c-U>Da){U=c-Da;d=!1;a=R(U,c);break a}if(0> U){U=0;d=!1;a=R(U,c);for(var f=!0;a<b;){c++;if(!Eb&&c>Da){c=Da;f=!1;a=R(0,c);break a}if(c>s){c=s;f=!1;a=R(0,c);break a}a=R(0,c)}f&&(c--,a=R(U,c));break a}a=R(U,c)}d&&(U++,a=R(U,c));b=Ia[U];"horizontal"==Ca?(J=a,w.css("width",J+"px"),Na?w.css(X,ha+"px"):w.css("left",g.width()/2-J/2+"px"),N.stop().animate({left:-b+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}})):(J=a,w.css("height",J+"px"),Na?w.css(X,ha+"px"):w.css("top",g.height()/2-J/2+"px"),N.stop().animate({top:-b+"px"},{duration:500, easing:"easeOutQuint",complete:function(){sb()}}));wa=c-U;Gd();k=U;0>k&&(k=0)}else if("nextMenuBtn"==a){if(k==s-wa)return;Gb=!0;k+=wa;k>s-1&&(k=s-1);Db()}return!1}}function Oa(a){"off"==a?D.css("display","none"):D.css("display","block")}function Pa(a){"off"==a?pa.css("display","none"):pa.css("display","block")}function sb(){s<=wa?(Oa("off"),Pa("off"),fc=!1):(Oa("on"),Pa("on"),fc=!0,0==k?Oa("off"):Oa("on"),k+wa==s?Pa("off"):Pa("on"),Gb=!1)}function Za(){Ya&&clearInterval(Ya);ma&&clearTimeout(ma);S(); na&&clearInterval(na);eb();ca=!1;da&&(da.remove(),da=null);fc=cc=!1;fb&&(fb.css("opacity",gc).find("a").css("cursor","pointer"),fb=null);Gc();var a=0,b;for(a;a<u;a++)if(b=e(hc[a]))b.unbind("click",Id),qa||b.unbind("mouseover",Jd).unbind("mouseout",Kd);hc=[];"horizontal"==Ka?P.css("left","0px"):P.css("top","0px");ea&&ea.css("display","none");Ea.stop().empty();Qa.stop().empty();Ea.css({zIndex:0,opacity:1,background:"none",overflow:"visible",display:"none"});Qa.css({zIndex:1,opacity:1,background:"none", overflow:"visible",display:"none"});F.css("background","none");t=!1;Xb=v;n=0;Fa=ia=ja=!1;V=[];fb=null;ea=e(ic[v]).css("display","block");V=ea.find("ul").children("li");Z=V.outerWidth();Ba=V.outerHeight();a=parseInt(ea.attr("data-playlistSize"),10);"left"==Q||"right"==Q?(g.css("width",a+"px"),"outside"==ga&&F.css("width",h("w")+"px")):(g.css("height",a+"px"),"outside"==ga&&F.css("height",h("h")+"px"));u=V.length;ab>u&&(ab=u);if(Ld){a=u;b=[];var c=[],d=0,f=0;for(d;d<a;d++)b[d]=d;f=0;for(f;f<a;f++)d= Math.round(Math.random()*(b.length-1)),c[f]=b[d],b.splice(d,1);Md=c}"horizontal"==Ka?(oa&&L.css("height",Ba+"px"),I=parseInt(e(V[0]).css("marginRight"),10),e(V[u-1]).css("marginRight","0px")):(oa&&L.css("width",Z+"px"),I=parseInt(e(V[0]).css("marginBottom"),10));A=ea.attr("data-transitionType").toUpperCase();"SLIDE"!=A&&("SPLIT"!=A&&"REVEAL"!=A&&"KEN_BURNS"!=A&&"ALPHA"!=A&&"ZOOM"!=A)&&(alert("Invalid transitionType on category number: "+v),"ALPHA"==A);"KEN_BURNS"!=A&&(a=ea.attr("data-imageFitMode"), "fit-inside"!=a&&"fit-outside"!=a?(alert("Invalid imageFitMode on category number: "+v),"fit-outside"==a):"fit-inside"==a?ka=!0:ka=!1,y=ea.attr("data-transitionEase"),z=parseInt(ea.attr("data-transitionTime"),10));"horizontal"==Ka&&P.css("width",u*Z+(u-1)*I+"px");void 0!=ea.attr("data-bgColor")&&(O=ea.attr("data-bgColor"));a=0;for(a;a<u;a++)b=e(V[a]).attr("data-id",a).css("opacity",gc).bind("click",Id),qa||b.bind("mouseover",Jd).bind("mouseout",Kd),hc.push(b);v>=k&&v<=k+wa-1||(k=v,0>k?k=0:k>s-wa&& (k=s-wa),(a=Ia[k])&&("horizontal"==Ca?N.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}):N.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}})));Fd();Ga&&gb&&(gb=!1,la.playAudio());if(Nd)bc(),Yb();else{bc();Yb();if(!Hb){D=j.find(".prevMenuBtn").css({display:"none",cursor:"pointer"}).attr("data-id","prevMenuBtn").bind(Y,Hd);pa=j.find(".nextMenuBtn").css({display:"none",cursor:"pointer"}).attr("data-id","nextMenuBtn").bind(Y, Hd);a=e("<div/>").addClass("menu_item").appendTo(N);cb="horizontal"==Ca?parseInt(a.css("marginRight"),10):parseInt(a.css("marginBottom"),10);c=a=0;f=e("<div/>").addClass("fontMeasure").appendTo(j);for(a;a<s;a++)b=e("<div/>").html(Od[a]).addClass("menu_item").appendTo(f),"horizontal"==Ca?(b.css({left:c+a*cb+"px",top:"0px"}),c+=b.width(),dc.push(b.outerWidth()),Ia.push(parseInt(b.css("left"),10))):(b.css({top:c+a*cb+"px",left:0}),c+=b.height(),dc.push(b.outerHeight()),Ia.push(parseInt(b.css("top"), 10))),b.css("width",b.width()+1+"px"),db<b.height()&&(db=b.height()),Fb<b.width()&&(Fb=b.width()),b.appendTo(N).attr("data-id",a).bind("click",we).css({cursor:"pointer",opacity:Hc}),qa||b.bind("mouseover",xe).bind("mouseout",ye),Jc.push(b);ms=a=0;for(a;a<s;a++)ms+=dc[a]+cb;ms-=cb;e(Jc).each(function(){e(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})});"horizontal"==Ca?(w.css("height", db+"px"),N.css({width:ms+"px",height:db+"px"}),parseInt(w.css("height"),10)):(w.css("width",Fb+"px"),N.css({height:ms+"px",width:db+"px"}),parseInt(w.css("width"),10));f.remove();Db();Fd()}Fc||g.css("display","block");Nd=!0}Hb||Db();T||(K=0,Cb(x()))}function Id(a){if(!q||ia||"KEN_BURNS"!=A&&B)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("data-id");if(a==x())return!1;Ib=!0;eb();T?(hb(),K=a,e.address.value(Ja(x())),e.address.history()|| e.address.history(!0)):Cb(a);return!1}function Jd(a){if(!q)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget);a.attr("data-id");a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"});return!1}function Kd(a){if(!q)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget);if(a.attr("data-id")==x())return!1;a.stop().animate({opacity:gc},{duration:500,easing:"easeOutSine"}).find("a").css("cursor", "pointer");return!1}function hb(){fb&&fb.stop().animate({opacity:gc},{duration:500,easing:"easeOutSine"}).find("a").css("cursor","pointer")}function qb(){var a=hc[x()];a&&(a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}).find("a").css("cursor","default"),fb=a);a=x();a>=n&&a<=n+l-1||(n=a,Ed())}function Pd(a){if(!t){jc=!0;var b;b=e(V[a]);var c,d,f=Ra[v].main;a=e(new Image).attr("id",a).css({top:0,left:0,display:"block"});"SLIDE"==A||"SPLIT"==A||"REVEAL"==A?a.css("position","absolute"): ("KEN_BURNS"==A||"ALPHA"==A||"ZOOM"==A)&&a.css({position:"relative",width:"100%",height:"100%"});b=b.attr("data-imagePath");a.load(function(){c=e(this);d=parseInt(c.attr("id"),10);this.origWidth=this.width;this.origHeight=this.height;f[d]=c;jc=!1;ia?(ia=!1,q?va():setTimeout(function(){va()},800)):Cb(x());q||(q=!0,"undefined"!==typeof multiGallerySetupDone&&multiGallerySetupDone(),"inside"==ga&&ze&&setTimeout(function(){bc();Yb();Hb||Db();Ec()},500),Ga&&ob.autoOpenAudioPlayer&&Kc())}).attr("src",b); a.error(function(){})}}function tb(){ia=!0;jc?(na&&clearInterval(na),na=setInterval(Ae,Be)):Pd(x())}function Ae(){jc||(na&&clearInterval(na),Lc[x()]?(ia=!1,va()):Pd(x()))}function va(a){switch(A){case "SLIDE":B=!0;var b=Ra[v].main;if(b[x()]){var b=b[x()],c=b[0].origWidth;a=b[0].origHeight;var d=h("w"),f=h("h");currentHolder=ra(!0).css("display","block");if(xa||c>d||a>f)a=ya(F,c,a,ka),c=a.width,a=a.height;void 0!=O&&(Ea.css("background",O),Qa.css("background",O));ub([b]);b.css({width:c+"px",height:a+ "px",left:d/2-c/2+"px",top:f/2-a/2+"px"});currentHolder.css({width:d+"px",height:f+"px",overflow:"hidden"});vb();if(ja){Mc=Nc(Ce);c=currentHolder;switch(Mc){case "top":c.css({left:0,top:-h("h")+"px"});break;case "left":c.css({left:-h("w")+"px",top:0});break;case "bottom":c.css({left:0,top:h("h")+"px"});break;case "right":c.css({left:h("w")+"px",top:0})}currentHolder.append(b);var j=ib(currentHolder),b=currentHolder;switch(Mc){case "top":b.stop().animate({top:0},{duration:z,easing:y});j.stop().animate({top:h("h")}, {duration:z,easing:y,complete:function(){G(j)}});break;case "bottom":b.stop().animate({top:0},{duration:z,easing:y});j.stop().animate({top:-h("h")},{duration:z,easing:y,complete:function(){G(j)}});break;case "left":b.stop().animate({left:0},{duration:z,easing:y});j.stop().animate({left:h("w")},{duration:z,easing:y,complete:function(){G(j)}});break;case "right":b.stop().animate({left:0},{duration:z,easing:y}),j.stop().animate({left:-h("w")},{duration:z,easing:y,complete:function(){G(j)}})}}else currentHolder.css({left:"0px", top:"0px",opacity:0}).append(b).stop().animate({opacity:1},{duration:Oc,easing:Pc,complete:function(){G()}});ja=!0}else jb(),tb();break;case "SPLIT":B=!0;b=Ra[v].main;if(b[x()]){b=b[x()];f=h("w");a=h("h");var c=b.clone(),r=b[0].origWidth,m=b[0].origHeight,d=ra(!0).css("display","block");if(xa||r>f||m>a)m=ya(F,r,m,ka),r=m.width,m=m.height;ub([b,c]);b.css({width:r+"px",height:m+"px",left:f/2-r/2+"px",top:a/2-m/2+"px"});c.css({width:r+"px",height:m+"px"});d.css({width:f+"px",height:a+"px",left:"0px", top:"0px",overflow:"hidden"});W=Nc(De);d.splitCase=W;f=r;a=m;r=h("w");m=h("h");if("horizontalUpLeft"==W||"horizontalUpRight"==W||"horizontalSplit"==W)e("<div/>").attr("data-title","split1").css({background:O,position:"absolute",top:0,left:0,width:r+"px",height:m/2+"px",overflow:"hidden"}).append(b).appendTo(d),e("<div/>").attr("data-title","split2").css({background:O,position:"absolute",top:m/2+"px",left:0,width:r+"px",height:m/2+"px",overflow:"hidden"}).append(c).appendTo(d),c.css({left:r/2-f/2+ "px",top:-m/2+(m-a)/2+"px"});else if("verticalUpLeft"==W||"verticalDownLeft"==W||"verticalSplit"==W)e("<div/>").attr("data-title","split1").css({background:O,position:"absolute",top:0,left:0,width:r/2+"px",height:m+"px",overflow:"hidden"}).append(b).appendTo(d),e("<div/>").attr("data-title","split2").css({background:O,position:"absolute",top:0,left:r/2+"px",width:r/2+"px",height:m+"px",overflow:"hidden"}).append(c).appendTo(d),c.css({left:-f/2+"px",top:m/2-a/2+"px"});vb();if(ja){var k=ib(d).css("display", "block");Qc(k,d);W=k.splitCase;b=e(k.children("div[data-title=split1]"));c=e(k.children("div[data-title=split2]"));d=h("w");f=h("h");"horizontalUpLeft"==W?(b.stop().animate({left:-d+"px"},{duration:z,easing:y}),c.stop().animate({left:d+"px"},{duration:z,easing:y,complete:function(){G(k)}})):"horizontalUpRight"==W?(b.stop().animate({left:d+"px"},{duration:z,easing:y}),c.stop().animate({left:-d+"px"},{duration:z,easing:y,complete:function(){G(k)}})):"horizontalSplit"==W?(b.stop().animate({top:-f/2+ "px"},{duration:z,easing:y}),c.stop().animate({top:f+"px"},{duration:z,easing:y,complete:function(){G(k)}})):"verticalUpLeft"==W?(b.stop().animate({top:-f+"px"},{duration:z,easing:y}),c.stop().animate({top:f+"px"},{duration:z,easing:y,complete:function(){G(k)}})):"verticalDownLeft"==W?(b.stop().animate({top:f+"px"},{duration:z,easing:y}),c.stop().animate({top:-f+"px"},{duration:z,easing:y,complete:function(){G(k)}})):"verticalSplit"==W&&(b.stop().animate({left:-d/2+"px"},{duration:z,easing:y}),c.stop().animate({left:d+ "px"},{duration:z,easing:y,complete:function(){G(k)}}))}else d.css("opacity",0).stop().animate({opacity:1},{duration:Oc,easing:Pc,complete:function(){G()}});ja=!0}else jb(),tb();break;case "REVEAL":B=!0;b=Ra[v].main;if(b[x()]){b=b[x()];c=b[0].origWidth;r=b[0].origHeight;d=ra(!0).css("display","block");f=h("w");a=h("h");if(xa||c>a||r>a)r=ya(F,c,r,ka),c=r.width,r=r.height;void 0!=O&&(Ea.css("background",O),Qa.css("background",O));ub([b]);b.css({width:c+"px",height:r+"px",left:f/2-c/2+"px",top:a/2-r/ 2+"px"});d.css({overflow:"hidden",width:f+"px",height:a+"px",left:"0px",top:"0px"});vb();if(ja){Jb=Nc(Ee);var p=ib(d);Qc(p,d);d.append(b);"top"==Jb?p.stop().animate({top:-h("h")+"px"},{duration:z,easing:y,complete:function(){G(p)}}):"bottom"==Jb?p.stop().animate({top:h("h")+"px"},{duration:z,easing:y,complete:function(){G(p)}}):"right"==Jb?p.stop().animate({left:h("w")+"px"},{duration:z,easing:y,complete:function(){G(p)}}):"left"==Jb&&p.stop().animate({left:-h("w")+"px"},{duration:z,easing:y,complete:function(){G(p)}})}else d.css("opacity", 0).append(b).stop().animate({opacity:1},{duration:Oc,easing:Pc,complete:function(){G()}});ja=!0}else jb(),tb();break;case "KEN_BURNS":a||(Rc=Sc=!1);Fa=B=!0;a=Ra[v].main;if(a[x()]){var g=a[x()],m=h("w"),l=h("h"),n=g[0].origWidth,q=g[0].origHeight;a=e(V[x()]);var u=!1,s=parseFloat(a.attr("data-startScale"));if(isNaN(s)||0==s)s=1;var t=parseFloat(a.attr("data-endScale"));if(isNaN(t)||0==t)t=1.5;s<t&&(u=!0);var w=a.attr("data-startPosition").toLowerCase();if(Qd(w)||!Rd(w,Kb))w=Tc(Kb);r=a.attr("data-endPosition").toLowerCase(); if(Qd(r)||!Rd(r,Kb))for(r=Tc(Kb);r==w;)r=Tc(Kb);wb?(a=ib(wb),wb.css("zIndex",0),a.css("zIndex",1)):a=ra(!0);a.css({opacity:!Sc?0:1,display:"block"}).append(g);void 0!=O&&F.css("background",O);ub([g]);u?(s*=m,s<m&&(s=m),u=s*(q/n),u<l&&(u=l,s=u*(n/q)),g=m*t,g<m&&(g=m),t=g*(q/n),t<l&&(t=l,g=t*(n/q))):(g=m*t,g<m&&(g=m),t=g*(q/n),t<l&&(t=l,g=t*(n/q)),s*=m,s<=g&&(s=1.5*g),u=s*(q/n),u<l&&(u=l,s=u*(n/q)));a.css({width:s+"px",height:u+"px"});n=a.width();q=a.height();switch(w){case "tl":c=b=0;break;case "tc":b= m/2-n/2;c=0;break;case "tr":b=m-n;c=0;break;case "ml":b=0;c=l/2-q/2;break;case "mc":b=m/2-n/2;c=l/2-q/2;break;case "mr":b=m-n;c=l/2-q/2;break;case "bl":b=0;c=l-q;break;case "bc":b=m/2-n/2;c=l-q;break;case "br":b=m-n,c=l-q}m=g;l=t;w=h("w");n=h("h");switch(r){case "tl":d=f=0;break;case "tc":f=w/2-m/2;d=0;break;case "tr":f=w-m;d=0;break;case "ml":f=0;d=n/2-l/2;break;case "mc":f=w/2-m/2;d=n/2-l/2;break;case "mr":f=w-m;d=n/2-l/2;break;case "bl":f=0;d=n-l;break;case "bc":f=w/2-m/2;d=n-l;break;case "br":f= w-m,d=n-l}a.css({left:b+"px",top:c+"px"});rd=f;sd=d;td=m;ud=l;vb();H&&E.children("img")&&E.children("img").attr("src",kb);kc();a.stop().animate({opacity:1},{duration:Uc,easing:"easeOutSine",queue:!1,complete:function(){ib(e(this)).stop().empty().css("display","none");Rc||Sd();Rc=!0;Ib=Fa=!1;!H&&B?lc():Vc&&lc()}});wb=a;H?(Lb(),a.animate({left:f+"px",top:d+"px",width:m+"px",height:l+"px"},{duration:sa+Uc,easing:"linear",queue:!1,complete:function(){H&&e(this).empty().css("display","none")}})):B=!1; Sc=!0}else jb(),tb();break;case "ALPHA":B=!0;b=Ra[v].main;if(b[x()]){b=b[x()];c=b[0].origWidth;r=b[0].origHeight;d=ra(!0).css({display:"block",opacity:0});f=h("w");a=h("h");if(xa||c>f||r>a)r=ya(F,c,r,ka),c=r.width,r=r.height;void 0!=O&&F.css("background",O);ub([b]);b.css({width:c+"px",height:r+"px",left:f/2-c/2+"px",top:a/2-r/2+"px"});d.css({overflow:"hidden",width:f+"px",height:a+"px",left:"0px",top:"0px"}).append(b);vb();if(ja){var D=ib(d).stop().animate({opacity:0},{duration:z,easing:y,complete:function(){G(D)}}); d.stop().animate({opacity:1},{duration:z,easing:y})}else d.stop().animate({opacity:1},{duration:z,easing:y,complete:function(){G()}});ja=!0}else jb(),tb();break;case "ZOOM":if(B=!0,b=Ra[v].main,b[x()]){b=b[x()];c=b[0].origWidth;a=b[0].origHeight;d=h("w");f=h("h");if(xa||c>d||a>f)a=ya(F,c,a,ka),c=a.width,a=a.height;void 0!=O&&F.css("background",O);ub([b]);var r=ra(!0).css("display","block"),C=ib(r);Qc(r,C);r.css({width:d+"px",height:f+"px",left:0,top:0,overflow:"hidden"}).append(b);b.css({left:Math.random()* d+"px",top:Math.random()*f+"px",width:"0px",height:"0px"});vb();ja?b.animate({width:c+"px",height:a+"px",left:h("w")/2-c/2+"px",top:h("h")/2-a/2+"px"},{duration:z,easing:y,complete:function(){G(C)}}):b.animate({width:c+"px",height:a+"px",left:h("w")/2-c/2+"px",top:h("h")/2-a/2+"px"},{duration:z,easing:y,complete:function(){G()}});ja=!0}else jb(),tb()}}function G(a){t||(a&&a.empty().css("display","none"),B=!1,Sd(),Ib=!1,H&&!ca&&(E.children("img")&&E.children("img").attr("src",kb),kc(),Lb()))}function lc(){if(!q|| t||Fa)return!1;wb.stop();S();B=!1}function Td(){if(!q||t||Fa)return!1;Lb();wb.animate({left:rd+"px",top:sd+"px",width:td+"px",height:ud+"px"},{duration:sa+Uc,easing:"linear",queue:!1,complete:function(){H&&e(this).empty().css("display","none")}});B=!0}function ib(a){return"_holder1"==a.attr("data-title")?Qa:Ea}function Qc(a,b){a.css("zIndex",1);b.css("zIndex",0)}function ra(a){var b=Ea.children().size();return a?0<b?Qa:Ea:0<b?Ea:Qa}function ya(a,b,c,d){a={};var e=h("w"),g=h("h"),r=(e-0)/(g-0),m=b/ c;m<r?d?(a.width=(g-0)/c*b,a.height=g-0):(a.height=(e-0)/b*c,a.width=e-0):m>r?d?(a.height=(e-0)/b*c,a.width=e-0):(a.width=(g-0)/c*b,a.height=g-0):(a.width=e-0,a.height=g-0);return a}function Qd(a){var b=!1;""==a.replace(/\s/g,"")&&(b=!0);return b}function Nc(a){var b=Math.floor(Math.random()*(a.length-1)),b=a.splice(b,1)[0];a.push(b);return b}function Tc(a){var b=Math.round(Math.random()*(a.length-1));return a[b]}function Rd(a,b){var c=0,d=b.length,e,h;for(c;c<d;c++)if(h=b[c],a==h){e=!0;break}return e} function Ud(a){ca&&(H||(H=!0),ca=!1);H?(S(),H=!1,qa?E.children("img")&&E.children("img").attr("src",mc):E.children("img")&&E.children("img").attr("src",a?Vd:mc),"KEN_BURNS"==A&&B&&lc()):(H=!0,qa?E.children("img")&&E.children("img").attr("src",kb):E.children("img")&&E.children("img").attr("src",a?Wd:kb),sa||kc(),"KEN_BURNS"!=A?B||Lb():B||Td())}function Mb(a){a?(H=!0,E.children("img")&&E.children("img").attr("src",kb),sa||kc(),"KEN_BURNS"!=A?B||Lb():B||Td()):(S(),H=!1,E.children("img")&&E.children("img").attr("src", mc),"KEN_BURNS"==A&&B&&lc())}function S(){Nb&&clearTimeout(Nb);Sa.length&&Sa.stop();sa&&(Xd=(new Date).getTime()-Yd,sa-=Xd)}function Lb(){Nb&&clearTimeout(Nb);Yd=(new Date).getTime();Nb=setTimeout(Wc,sa);if(Sa.length){var a=h("w");Sa.stop().animate({width:a+"px"},{duration:sa,easing:"linear"})}}function kc(){var a;Fe?a=void 0!=ea.attr("data-duration")?parseFloat(ea.attr("data-duration"),10):0<nc?nc:3E3:(a=e(V[x()]),a=void 0!=a.attr("data-duration")?parseFloat(a.attr("data-duration"),10):0<nc?nc:3E3); sa=a}function x(){return Ld?Ib?K:Md[K]:K}function jb(){Ob.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:500,easing:"easeOutSine"})}function vb(){Ob.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Ob.css("display","none")}})}function yd(a){return 0==a.replace(/^\s+|\s+$/g,"").length}function Ta(a){q&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("class"),"music_toggle"== a?Pb.children("img").attr("src",Ge):"controls_prev"==a?Xc.children("img").attr("src",He):"controls_toggle"==a?H?E.children("img").attr("src",Wd):E.children("img").attr("src",Vd):"controls_next"==a?Yc.children("img").attr("src",Ie):"info_toggle"==a?lb.children("img").attr("src",Je):"link_toggle"==a?xb.children("img").attr("src",Ke):"playlist_toggle"==a?aa?bb.children("img").attr("src",Le):bb.children("img").attr("src",Me):"gallery_fullscreen"==a&&("normal"==oc?Ha.children("img").attr("src",Ne):Ha.children("img").attr("src", Oe)))}function Ua(a){q&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("class"),"music_toggle"==a?Pb.children("img").attr("src",Pe):"controls_prev"==a?Xc.children("img").attr("src",Qe):"controls_toggle"==a?H?E.children("img").attr("src",kb):E.children("img").attr("src",mc):"controls_next"==a?Yc.children("img").attr("src",Re):"info_toggle"==a?lb.children("img").attr("src",Zd):"link_toggle"==a?xb.children("img").attr("src",Se): "playlist_toggle"==a?aa?bb.children("img").attr("src",Cd):bb.children("img").attr("src",Bd):"gallery_fullscreen"==a&&("normal"==oc?Ha.children("img").attr("src",$d):Ha.children("img").attr("src",ae)))}function Va(a){if(!q)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("class");if("music_toggle"==a)Kc();else if("controls_prev"==a){if(ia)return;Zc()}else if("controls_toggle"==a)Ud(!0);else if("controls_next"==a){if(ia)return; $c()}else if("info_toggle"==a){if(!Qb)return;ad()}else if("link_toggle"==a){if(!Qb)return;pc&&("_parent"==yb?window.location.href=pc:"_blank"==yb&&window.open(pc,yb))}else if("playlist_toggle"==a)Ec();else if("gallery_fullscreen"==a&&(bd||cd))document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen(): document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();return!1}function be(a){if(!ia)return"right"==a?Zc():"left"==a&&$c(),!1}function $c(){"KEN_BURNS"!=A?B||Wc():Fa||Wc()}function Zc(){"KEN_BURNS"!=A?B||ce():Fa||ce()}function Cb(a){"KEN_BURNS"!=A?ja?B||(S(),eb(),hb(),K=a, qb(),va()):(S(),eb(),hb(),K=a,qb(),va()):Fa||(S(),eb(),hb(),K=a,qb(),va())}function Wc(){S();eb();hb();K++;if(K>u-1&&(K=0,de)){v++;v>s-1&&(v=0);k+wa-1<v?k=v:0==v&&(k=v);T?(e.address.value(Ja(x())),e.address.history()||e.address.history(!0)):Za();return}T?(e.address.value(Ja(x())),e.address.history()||e.address.history(!0)):(qb(),va())}function ce(){S();eb();hb();K--;if(0>K&&(K=u-1,de)){v--;0>v&&(v=s-1);K=$a[v].mediaName.length-1;T?(e.address.value(Ja(x())),e.address.history()||e.address.history(!0)): Za();return}T?(e.address.value(Ja(x())),e.address.history()||e.address.history(!0)):(qb(),va())}function Sd(){var a=e(V[x()]);da&&(da.remove(),da=null);var b=e(V[x()]);if(void 0!=b.attr("data-caption-id")){b=b.attr("data-caption-id");da=Te.find(b).clone().css({display:"none"}).appendTo(F);var c,d,f=0,h=0,g;mb=[];d=da.children().size();for(f;f<d;f++)b={},mb.push(b),c=e(da.children()[f]),b.content_item=c,b.startX=parseInt(c.attr("data-startX"),10),b.startY=parseInt(c.attr("data-startY"),10),b.endX= parseInt(c.attr("data-endX"),10),b.endY=parseInt(c.attr("data-endY"),10),b.ease=c.attr("data-ease"),b.time=parseInt(c.attr("data-time"),10),b.delay=parseInt(c.attr("data-delay"),10),g=b.time+b.delay,g>h&&(h=g),c.css({position:"absolute",opacity:0,left:b.startX+"px",top:b.startY+"px",zIndex:9});da.css("display","block");f=0;for(f;f<d;f++)b=mb[f],c=b.content_item,c.delay(b.delay).animate({left:b.endX+"px",top:b.endY+"px",opacity:1},{duration:b.time,easing:b.ease})}qc&&(void 0!=a.attr("data-description")&& !yd(a.attr("data-description")))&&(ee=a.attr("data-description"),za.css("width","auto").html(ee),parseInt(za.css("width"),10)>fe&&za.css("width",fe+"px"),qc&&(lb.children("img").attr("src",Zd),lb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"})),Ue&&ad());nb&&(void 0!=a.attr("data-vimeo")?(videoType="vimeo",videoLink=a.attr("data-vimeo"),rc("on")):void 0!=a.attr("data-youtube")?(videoType="youtube",videoLink=a.attr("data-youtube"),rc("on")):void 0!= a.attr("data-localMp4")&&(videoType="local",b=a.attr("data-localMp4"),c="",void 0!=a.attr("data-localOgv")&&(c=a.attr("data-localOgv")),d="",void 0!=a.attr("data-localWebm")&&(d=a.attr("data-localWebm")),f="",void 0!=a.attr("data-localPreview")&&(f=a.attr("data-localPreview")),videoLink={mp4:b,ogv:c,webm:d,preview:f},rc("on")));dd&&xb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"});Qb=!0;"undefined"!==typeof afterSlideChange&&afterSlideChange(x())} function ub(){dd=!1;var a=e(V[x()]);void 0!=a.attr("data-link")&&(dd=!0,pc=a.attr("data-link"),void 0!=a.attr("data-target")&&(yb=a.attr("data-target")),yb||(yb="_blank"))}function eb(){Qb=!1;"undefined"!==typeof beforeSlideChange&&beforeSlideChange(x());if(mb.length){var a=0,b,c,d=mb.length;for(a;a<d;a++)b=mb[a],c=b.content_item,c.stop().animate({left:b.startX+"px",top:b.startY+"px",opacity:0},{duration:500,easing:"easeOutQuint"});setTimeout(function(){da&&(da.remove(),da=null);mb=[]},500)}sa=null; Sa.length&&Sa.stop().css("width","0px");Ga&&gb&&(gb=!1,la.playAudio());ca&&(ca=!1,H=!0);nb&&(Vc=!1,sc&&Rb("off",!0),rc("off"));qc&&(lb.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){lb.css("display","none")}}),zb&&(za.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){za.css("display","none")}}),zb=!1));xb.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){xb.css("display","none")}})}function ad(){tc&& Kc();zb?(za.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){za.css("display","none")}}),zb=!1):(za.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"}),zb=!0)}function Kc(){Ga&&(zb&&ad(),tc?(la.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){la.css("display","none")}}),tc=!1):(la.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"}),tc=!0,ge||(la.reinitNameScroll(), ge=!0)))}function h(a){var b;if("top"==Q||"bottom"==Q)b="inside"!=ga?"w"==a?j.width():j.height()-g.height():"w"==a?j.width():j.height();else if("left"==Q||"right"==Q)b="inside"!=ga?"w"==a?j.width()-g.width():j.height():"w"==a?j.width():j.height();return b}function Ve(){"outside"==ga&&("left"==Q||"right"==Q?F.css("width",h("w")+"px"):F.css("height",h("h")+"px"));if(B)he();else switch(A){case "SLIDE":var a=ra(!1),b=a.children(),c=b[0].origWidth,d=b[0].origHeight,f=h("w"),g=h("h");if(xa||c>f||d>g)d= ya(F,c,d,ka),c=d.width,d=d.height;b.css({width:c+"px",height:d+"px",left:f/2-c/2+"px",top:g/2-d/2+"px"});a.css({width:f+"px",height:g+"px"});break;case "SPLIT":var a=ra(!1),b=a.splitCase,c=e(a.children("div[data-title=split1]")),f=e(a.children("div[data-title=split2]")),g=c.children("img"),d=f.children("img"),k=g[0].origWidth,m=g[0].origHeight,l=h("w"),j=h("h");if(xa||k>l||m>j)m=ya(F,k,m,ka),k=m.width,m=m.height;g.css({width:k+"px",height:m+"px",left:l/2-k/2+"px",top:j/2-m/2+"px"});d.css({width:k+ "px",height:m+"px"});a.css({width:l+"px",height:j+"px",left:"0px",top:"0px"});if("horizontalUpLeft"==b||"horizontalUpRight"==b||"horizontalSplit"==b)c.css({top:0,left:0,width:l+"px",height:j/2+"px"}),f.css({top:j/2+"px",left:0,width:l+"px",height:j/2+"px"}),d.css({left:l/2-k/2+"px",top:-j/2+(j-m)/2+"px"});else if("verticalUpLeft"==b||"verticalDownLeft"==b||"verticalSplit"==b)c.css({top:0,left:0,width:l/2+"px",height:j+"px"}),f.css({top:0,left:l/2+"px",width:l/2+"px",height:j+"px"}),d.css({left:-k/ 2+"px",top:j/2-m/2+"px"});break;case "REVEAL":a=ra(!1);b=a.children();c=b[0].origWidth;d=b[0].origHeight;f=h("w");g=h("h");if(xa||c>f||d>g)d=ya(F,c,d,ka),c=d.width,d=d.height;b.css({width:c+"px",height:d+"px",left:f/2-c/2+"px",top:g/2-d/2+"px"});a.css({width:f+"px",height:g+"px",left:"0px",top:"0px"});break;case "ALPHA":a=ra(!1);b=a.children();c=b[0].origWidth;d=b[0].origHeight;f=h("w");g=h("h");if(xa||c>f||d>g)d=ya(F,c,d,ka),c=d.width,d=d.height;b.css({width:c+"px",height:d+"px",left:f/2-c/2+"px", top:g/2-d/2+"px"});a.css({width:f+"px",height:g+"px",left:"0px",top:"0px"});break;case "ZOOM":a=ra(!1);b=a.children();c=b[0].origWidth;d=b[0].origHeight;f=h("w");g=h("h");if(xa||c>f||d>g)d=ya(F,c,d,ka),c=d.width,d=d.height;a.css({width:f+"px",height:g+"px",left:0,top:0});b.css({width:c+"px",height:d+"px",left:f/2-c/2+"px",top:g/2-d/2+"px"});break;case "KEN_BURNS":he()}bc();Yb();Hb||Db()}function he(){S();na&&clearInterval(na);Ea.stop().empty().css({zIndex:0,opacity:1,background:"none",overflow:"visible", display:"none"});Qa.stop().empty().css({zIndex:1,opacity:1,background:"none",overflow:"visible",display:"none"});va(!0)}var q=!1,ed=this;e("body");var We=e(window),ie=e(document),Y="",fd,cc=!0,fc=!0;"ontouchstart"in window?(fd=!0,Y="touchstart.ap"):(fd=!1,Y="mousedown.ap");var uc=!1,gd,je=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(je=parseFloat(RegExp.$1));gd=je;-1!=gd&&9>gd&&(uc=!0);var qa=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent); Math.abs(window.orientation);window.onorientationchange=function(){};var cd=!!document.createElement("video").canPlayType,kb="media/data/gallery_icons/pause.png",Wd="media/data/gallery_icons/pause_on.png",Bd="media/data/gallery_icons/plus.png",Me="media/data/gallery_icons/plus_on.png",Cd="media/data/gallery_icons/minus.png",Le="media/data/gallery_icons/minus_on.png",Qe="media/data/gallery_icons/prev.png",He="media/data/gallery_icons/prev_on.png",mc="media/data/gallery_icons/play.png",Vd="media/data/gallery_icons/play_on.png", Re="media/data/gallery_icons/next.png",Ie="media/data/gallery_icons/next_on.png",Zd="media/data/gallery_icons/info.png",Je="media/data/gallery_icons/info_on.png",Se="media/data/gallery_icons/link.png",Ke="media/data/gallery_icons/link_on.png",Pe="media/data/audio_icons/music.png",Ge="media/data/audio_icons/music_on.png",$d="media/data/gallery_icons/fullscreen_enter.png",Ne="media/data/gallery_icons/fullscreen_enter_on.png",ae="media/data/gallery_icons/fullscreen_exit.png",Oe="media/data/gallery_icons/fullscreen_exit_on.png", ga=p.playlistIndex,Na=p.fixMenu;if(Na)var X=p.fixMenuSettings.side,ha=p.fixMenuSettings.value;var $b=p.fixThumbs;if($b)var rb=p.fixThumbsSettings.side,ac=p.fixThumbsSettings.value;var Xe=p.disableRightClick,Ye=p.componentFixedSize,Q=p.playlistPosition,Ka=p.thumbOrientation,Ca=p.menuOrientation,fe=p.maxDescriptionWidth,ze=p.autoOpenPlaylist,H=p.slideshowOn,nc=p.slideshowDelay,sa,Fe=p.useGlobalDelay,Hc=p.menuItemOffOpacity,gc=p.thumbOffOpacity,Fc=p.playlistHidden,Ld=p.randomPlay,de=p.slideshowAdvancesToNextCategory, xa=p.forceImageFitMode,ab=p.visibleThumbs,$=p.thumbBtnSpace,Da=p.visibleMenuItems,ba=p.menuBtnSpace,Ue=p.autoOpenDescription,nb=p.useVideo,Ga=p.useAudio,Ze=p.pauseSlideshowOnHover,oa=p.autoAdjustPlaylist,j=e(p.componentHolder),Ob=j.find(".componentPreloader");jb();var Sa=j.find(".slide_timer"),P=j.find(".thumbWrapper"),F=j.find(".componentHolder"),g=j.find(".componentPlaylist"),L=j.find(".thumbHolder"),w=j.find(".menuHolder"),N=j.find(".menuWrapper"),Ea=j.find(".mediaHolder1").attr("data-title","_holder1").css("zIndex", 0).bind("dragstart",function(a){a.preventDefault();return!1}).bind("selectstart",function(a){a.preventDefault();return!1}).touchSwipe(be,!0),Qa=j.find(".mediaHolder2").attr("data-title","_holder2").css("zIndex",1).bind("dragstart",function(a){a.preventDefault();return!1}).bind("selectstart",function(a){a.preventDefault();return!1}).touchSwipe(be,!0),C=j.find(".prevThumbBtn").css({display:"none",cursor:"pointer"}).attr("data-id","prevThumbBtn").bind(Y,Dd),fa=j.find(".nextThumbBtn").css({display:"none", cursor:"pointer"}).attr("data-id","nextThumbBtn").bind(Y,Dd),Te=j.find(".caption_holder");if(nb)var Wa=e(p.playerHolder),Aa=!1,Sb,sc=!1,ca=!1,$e=p.playerBgOpacity,vc=j.find(".player_bg").css("display","none").bind(Y,function(){if(!q||t||Aa)return!1;Aa=!0;Rb("off");return!1}),wc=j.find(".player_bigPlay").css({display:"none",cursor:"pointer"}).bind("click",function(){if(!q||t||Aa||!Qb)return!1;Aa=!0;H&&(Vc=ca=!0,Mb(!1));Rb("on");return!1}),rc=function(a){"on"==a?wc.css({opacity:0,display:"block"}).stop().animate({opacity:1}, {duration:1E3,easing:"easeOutSine"}):wc.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){wc.css("display","none")}})},Rb=function(a,b){var c=500;"undefined"!==typeof b&&(c=0);"on"==a?(vc.stop().css({opacity:0,display:"block"}).animate({opacity:$e},{duration:c,easing:"easeOutSine"}),cd?Wa.stop().css({opacity:0,display:"block"}).animate({opacity:1},{duration:c,easing:"easeOutSine",complete:function(){Aa=!1}}):Wa.stop().css({opacity:0,display:"block",left:"50%"}).animate({opacity:1}, {duration:c,easing:"easeOutSine",complete:function(){Aa=!1}}),Sb&&Sb._findMedia(videoType,videoLink),sc=!0,Ga&&la.getMediaPlaying()&&(la.pauseAudio(),gb=!0)):(Sb&&Sb._cleanMedia(),vc.stop().animate({opacity:0},{duration:c,easing:"easeOutSine",complete:function(){vc.css("display","none")}}),Wa.stop().animate({opacity:0},{duration:c,easing:"easeOutSine",complete:function(){cd?Wa.css("display","none"):Wa.css("left","-10000px");sc=Aa=!1;ca&&(ca=!1,Mb(!0));Ga&&gb&&(gb=!1,la.playAudio())}}))};else e(p.playerHolder).remove(), j.find(".player_bg").remove();if(Ga){var Pb=j.find(".music_toggle").css("cursor","pointer").bind(Y,Va);qa||Pb.bind("mouseover",Ta).bind("mouseout",Ua);var tc=!1,ge=!1,gb=!1,la=e(ob.playerHolder).html5audio(ob);Pb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"})}else ob&&(e(ob.playerHolder).remove(),e(ob.playlistHolder).remove()),j.find(".music_toggle").remove();var bd=!1,xc=!1;document.documentElement.requestFullScreen?xc=!0:document.documentElement.mozRequestFullScreen? xc=!0:document.documentElement.webkitRequestFullScreen&&(xc=!0);if(xc&&j.find(".gallery_fullscreen").length){var bd=!0,oc="normal",Ha=j.find(".gallery_fullscreen").css("cursor","pointer").bind("click",Va);qa||Ha.bind("mouseover",Ta).bind("mouseout",Ua)}else j.find(".gallery_fullscreen").remove();if(bd)ie.on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(oc= "normal",Ha.find("img").attr("src",$d)):(oc="fullscreen",Ha.find("img").attr("src",ae))});var Cc=!1;"max"==ab&&(Cc=!0,$b=!1);var Ib=!1,ic=P.children("div[class=playlist]"),s=ic.size(),Hb=!1;1==s&&(Hb=!0);var mb=[],da,V=[],ea,u,aa=!1,wb,Yd,Xd,Uc=500,Sc=!1,Rc=!1,Vc=!1,Kb="tl tc tr ml mc mr bl bc br".split(" "),Fa=!1,Ce=["top","left","bottom","right"],Mc,Ee=["top","left","bottom","right"],Jb,De="horizontalUpLeft horizontalUpRight horizontalSplit verticalUpLeft verticalDownLeft verticalSplit".split(" "), W,Oc=500,Pc="easeOutSine",K=-1,t=!1,Nb,hd,Be=100,na,jc=!1,ia=!1,y,z,B=!1,fb=null,hc=[],dd=!1,pc,yb,Ra={},Xa,Lc,Od=[],ta=0;for(ta;ta<s;ta++)Xa={},Lc=[],Xa.mainLoaded=!1,Xa.main=Lc,Ra[ta]=Xa,Od[ta]=e(ic[ta]).attr("data-title");var Md=[],Qb=!1,ja=!1,A,ka=!1,O,I,Z,Ba,l,Ad=50+2*$,M,Zb=1,n=0,Nd=!1,wa=0,cb,Eb=!1;"max"==Da&&(Eb=!0,Na=!1);var k=0,Gb=!1,Jc=[],dc=[],Ia=[],ec=50+2*ba,D,pa,J=0,Fb=0,db=0,U,Ic=null;if(j.find(".slideshow_controls").length){var Ab=j.find(".slideshow_controls"),Xc=Ab.find(".controls_prev").css("cursor", "pointer").bind(Y,Va),E=Ab.find(".controls_toggle").css("cursor","pointer").bind(Y,Va),Yc=Ab.find(".controls_next").css("cursor","pointer").bind(Y,Va);qa||(Xc.bind("mouseover",Ta).bind("mouseout",Ua),E.bind("mouseover",Ta).bind("mouseout",Ua),Yc.bind("mouseover",Ta).bind("mouseout",Ua));H&&E.children("img").attr("src",kb);Ab.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"})}var qc=!1;if(0<j.find(".info_holder").length){var qc=!0,ke=j.find(".data_controls"), zb=!1,ee,lb=j.find(".info_toggle").css("cursor","pointer").bind(Y,Va);qa||lb.bind("mouseover",Ta).bind("mouseout",Ua);var za=j.find(".info_holder")}else j.find(".info_toggle").remove(),j.find(".info_holder").remove();var xb=j.find(".link_toggle").css("cursor","pointer").bind(Y,Va);qa||xb.bind("mouseover",Ta).bind("mouseout",Ua);if("inside"==ga){var bb=j.find(".playlist_toggle").css("cursor","pointer").bind(Y,Va).css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"}); qa||bb.bind("mouseover",Ta).bind("mouseout",Ua)}else j.find(".playlist_toggle").remove();g&&g.css("zIndex",10);ke&&ke.css("zIndex",11);Ab&&Ab.css("zIndex",12);za&&za.css("zIndex",13);Ob&&Ob.css("zIndex",14);Ga&&(Pb.css("zIndex",15),la.css("zIndex",16));Sa.length&&Sa.css({opacity:0.5,zIndex:17});Ha&&Ha.css("zIndex",18);nb&&(wc.css("zIndex",28),vc.css("zIndex",29),Wa.css("zIndex",30));Ze&&j.mouseenter(function(){H&&(ca=!0,Mb(!1));return!1}).mouseleave(function(){ca&&!sc&&(ca=!1,Mb(!0));return!1});if(fd){if(w.length){var le, me,id,jd,Tb,kd=!1;N.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap",function(a){if(!q||t||Gb)return!1;if(!fc)return!0;a=a.originalEvent.touches[0];le=N.position().left;me=N.position().top;id=a.pageX;jd=a.pageY;Tb=!1;kd=!0}).bind("touchmove.ap",function(a){if(kd){a=a.originalEvent.touches[0];if("horizontal"==Ka){var b=le-id+a.pageX,c=J,d=N.width();0<b?(b=0,Oa("off")):Oa("on");b<c-d?(b=c-d,Pa("off")):Pa("on");vd(Math.abs(b));N.css("left",b+"px")}else b=me-jd+ a.pageY,c=J,d=N.height(),0<b?(b=0,Oa("off")):Oa("on"),b<c-d?(b=c-d,Pa("off")):Pa("on"),vd(Math.abs(b)),N.css("top",b+"px");Tb=Tb||5<Math.abs(id-a.pageX)||5<Math.abs(jd-a.pageY);return!1}}).bind("touchend.ap",function(){kd=!1}).bind("click.ap-touchclick",function(){if(Tb)return Tb=!1})}if(g.length&&!Fc){var ne,oe,ld,md,Ub,nd=!1;P.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap",function(a){if(!q||t||t)return!1;if(!cc)return!0;a=a.originalEvent.touches[0];ne= P.position().left;oe=P.position().top;ld=a.pageX;md=a.pageY;Ub=!1;nd=!0}).bind("touchmove.ap",function(a){if(nd){a=a.originalEvent.touches[0];if("horizontal"==Ka){var b=ne-ld+a.pageX,c=M,d=P.width();0<b?(b=0,La("off"),n=0):(La("on"),n=Math.abs(Math.floor(b/(Z+I))));b<c-d?(b=c-d,Ma("off"),n=u-l):(Ma("on"),n=Math.abs(Math.floor(b/(Z+I))));P.css("left",b+"px")}else b=oe-md+a.pageY,c=M,d=P.height(),0<b?(b=0,La("off"),n=0):(La("on"),n=Math.abs(Math.floor(b/(Z+I)))),b<c-d?(b=c-d,Ma("off"),n=u-l):(Ma("on"), n=Math.abs(Math.floor(b/(Z+I)))),P.css("top",b+"px");Ub=Ub||5<Math.abs(ld-a.pageX)||5<Math.abs(md-a.pageY);return!1}}).bind("touchend.ap",function(){nd=!1}).bind("click.ap-touchclick",function(){if(Ub)return Ub=!1})}}var $a=[],ua,Bc=!1,ve=500,ma,Wb,T=p.useDeeplink,xd=p.startUrl,v,Xb,pb,ue=100,Ya,ta=0,Vb,od,pd,pe,qd,qe,re,yc;for(ta;ta<s;ta++){pd=e(ic[ta]);Vb=0;od=[];Xa={};yc=wd(pd.attr("data-address"));Xa.categoryName=yc;Xa.mediaName=od;$a.push(Xa);qd=pd.find("ul li");pe=qd.length;for(Vb;Vb<pe;Vb++)qe= e(qd[Vb]),re=qe.attr("data-address"),yc=wd(re),od.push(yc)}nb?Wa.videoGallery({mg_gallery:ed,mg_settings:p,wrapper:j,videoGallerySetupDone:function(){Sb=this;T?uc||(e.address.internalChange(zc),e.address.externalChange(Ac)):(v=p.activeCategory,Za())}}):T?uc||(e.address.internalChange(zc),e.address.externalChange(Ac)):(v=p.activeCategory,Za());T&&uc&&(e.address.internalChange(zc),e.address.externalChange(Ac));Xe&&ie.bind("contextmenu",function(){return!1});Ye||We.resize(function(){if(!q||t)return!1; hd&&clearTimeout(hd);hd=setTimeout(Ve,100)});this.toggleSlideshow=function(a){if(!q||t)return!1;void 0==a?Ud():Mb(a)};this.togglePlaylist=function(){if(!q)return!1;"inside"==ga&&Ec()};this.nextItem=function(){if(!q||ia||t)return!1;S();$c()};this.previousItem=function(){if(!q||ia||t)return!1;S();Zc()};this.loadItem=function(a){if(!q||ia||t)return!1;if("KEN_BURNS"!=A){if(B)return!1}else if(Fa)return!1;S();if("number"===typeof a)0>a?a=0:a>u-1&&(a=u-1);else if("string"===typeof a){if(!T)return alert("loadItem method accepts string parameter only if deeplink is used!"), !1;var b=!1,c=0,d=$a[v].mediaName,f=d.length;for(c;c<f;c++)if(d[c]==a){pb=c;b=!0;break}if(!b)return T&&e.address.history(!1),!1;a=pb}else return alert("Invalid value for loadItem!"),!1;if(a==K)return!1;Ib=!0;hb();T?(e.address.value(Ja(a)),e.address.history()||e.address.history(!0)):Cb(a)};this.loadCategory=function(a){if(!q||t)return!1;S();if("number"===typeof a)0>a?a=0:a>s-1&&(a=s-1);else if("string"===typeof a){if(!T)return alert("loadCategory method accepts string parameter only if deeplink is used!"), !1;if(!zd(a))return e.address.history(!1),!1;a=v}else return alert("Invalid value for openCategory!"),!1;if(a==Xb)return!1;t=!0;Gc();v=a;T?(e.address.value(Ja(0)),e.address.history()||e.address.history(!0)):Za()};e.fn.multiGallery.getSlideshowForcePause=function(){return ed.getSlideshowForcePause()};e.fn.multiGallery.videoEnd=function(){ed.videoEnd()};this.getSlideshow=function(){return H};this.getSlideshowForcePause=function(){return ca};this.videoPlayerHolderState=function(){var a=!0;"none"==Wa.css("display")&& (a=!1);return a};this.closePlayer=function(){if(!q||t||!nb||Aa)return!1;Aa=!0;Rb("off")};this.videoEnd=function(){if(!q||t||!nb)return!1;Aa=!0;Rb("off")};this.getAudioPlaylist=function(){if(!q)return!1;Ga&&la&&la.outputPlaylistData()};return this}})(jQuery);