(function(c){function e(b){function h(){"undefined"!==typeof a._player.setPlaybackQuality&&a._player.setPlaybackQuality("hd720");a.playerReady=!0;c(a).trigger("ap_YoutubePlayer.YT_READY");"undefined"!==typeof a._player.setVolume&&a._player.setVolume(100*a._defaultVolume);a._autoPlay&&a._player.playVideo()}function e(){}function j(b){if(a.forceMainStop&&(a.forceMainStop=!1,"undefined"!==typeof a._player.stopVideo)){a._player.stopVideo();c(a).trigger("ap_YoutubePlayer.FORCE_MAIN_STOP");return}-1==b.data? "undefined"!==typeof c.videoGallery&&("undefined"!==typeof c.videoGallery.getVolume&&a.isFirefox&&"undefined"!==typeof a._player.setVolume)&&a._player.setVolume(100*c.videoGallery.getVolume()):0==b.data?a.isIE?c(a).trigger("ap_YoutubePlayer.END_PLAY"):a.singleVideo||c(a).trigger("ap_YoutubePlayer.END_PLAY"):1==b.data?(a.small_embed&&"undefined"!==typeof a._player.setVolume&&a._player.setVolume(0),a.forcePreviewStop&&"undefined"!==typeof a._player.stopVideo&&a._player.stopVideo(),a._inited||(c(a).trigger("ap_YoutubePlayer.START_PLAY"), a._inited=!0,a.quality&&!0==a.quality&&"undefined"!==typeof a._player.getAvailableQualityLevels&&a._player.getAvailableQualityLevels()[0]&&a._player.setPlaybackQuality(a._player.getAvailableQualityLevels()[0])),a._initialAutoplaySet||(a.isMobile&&a.initialAutoplay&&(a._autoPlay=!0),a._initialAutoplaySet=!0),c(a).trigger("ap_YoutubePlayer.STATE_PLAYING")):2==b.data?c(a).trigger("ap_YoutubePlayer.STATE_PAUSED"):5==b.data&&c(a).trigger("ap_YoutubePlayer.STATE_CUED")}function k(b){c(a).trigger("ap_YoutubePlayer.ERROR_HANDLER", [b.data])}var a=this;"undefined"!==typeof c.videoGallery&&("undefined"!==typeof c.videoGallery.getSingleVideo&&"undefined"!==typeof c.videoGallery.getLooping&&c.videoGallery.getLooping()&&"undefined"!==typeof c.videoGallery.getAutoplay&&c.videoGallery.getAutoplay())&&(this.singleVideo=c.videoGallery.getSingleVideo());this.isIE=b.isIE?b.isIE:!1;this.isMobile=b.isMobile;this.initialAutoplay=b.initialAutoplay;this._inited=this._initialAutoplaySet=!1;this._player;this._autoPlay=b.autoPlay;this._defaultVolume= b.defaultVolume;this._youtubeHolder=b.youtubeHolder;this._frameId="ytplayer"+Math.floor(16777215*Math.random());b.quality&&(this.quality=b.quality);b.small_embed&&(this.small_embed=b.small_embed);this.lastID;this.playerReadyInterval=100;this.playerReadyIntervalID;this.playerReady=!1;var d=b.youtubeChromeless,f="&amp;rel=0";this.forcePreviewStop=this.forceMainStop=!1;this.isFirefox="MozBoxSizing"in document.documentElement.style;d?this.small_embed?d="http://www.youtube.com/embed/"+b.mediaPath+"?controls=0&amp;showinfo=0&amp;enablejsapi=1&amp;wmode=transparent": (d="http://www.youtube.com/embed/"+b.mediaPath+"?controls=0&amp;showinfo=0"+f+"&amp;enablejsapi=1&amp;theme=dark&amp;wmode=transparent",this.singleVideo&&!this.isIE&&(d="http://www.youtube.com/embed/"+b.mediaPath+"?controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1"+f+"&amp;enablejsapi=1&amp;theme=dark&amp;wmode=transparent")):d="http://www.youtube.com/embed/"+b.mediaPath+"?rel=0&amp;enablejsapi=1&amp;theme=dark&amp;wmode=transparent";this.youtubeVideoIframe=c("<iframe />",{frameborder:0,src:d,width:"100%", height:"100%",id:this._frameId,webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0});this._youtubeHolder.css("display","block").append(this.youtubeVideoIframe);var g=setInterval(function(){window.YT&&(g&&clearInterval(g),a._player=new YT.Player(a._frameId,{events:{onReady:h,onPlaybackQualityChange:e,onStateChange:j,onError:k}}))},100);window.onYouTubeIframeAPIReady=function(){}}c.youtubePlayer=function(b){return new e(b)};e.prototype={clean:function(){this._player&&("undefined"!==typeof this._player.stopVideo&& this._player.stopVideo(),this._player=null);this.youtubeVideoIframe&&(this.youtubeVideoIframe.attr("src",""),this.youtubeVideoIframe.remove(),this.youtubeVideoIframe=null)},stopPreview:function(){this.forcePreviewStop=!0},initVideo:function(b){this.forceMainStop=!1;if(this.playerReady)this._player&&(this._inited=this.forcePreviewStop=!1,this._autoPlay?"undefined"!==typeof this._player.loadVideoById&&this._player.loadVideoById(b):"undefined"!==typeof this._player.cueVideoById&&this._player.cueVideoById(b)); else{var c=this;this.lastID=b;this.playerReadyIntervalID||(this.playerReadyIntervalID=setInterval(function(){c.playerReady&&(c.playerReadyIntervalID&&clearInterval(c.playerReadyIntervalID),c.forceMainStop||c.initVideo(c.lastID))},this.playerReadyInterval))}},stop:function(){this.forceMainStop=!0;this._player&&"undefined"!==typeof this._player.stopVideo&&this._player.stopVideo()},play:function(){this._player&&"undefined"!==typeof this._player.playVideo&&this._player.playVideo()},pause:function(){this._player&& "undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},togglePlayback:function(b){if(this._player)if(void 0==b){if("undefined"===typeof this._player.getPlayerState)return!1;b=this._player.getPlayerState();1==b?"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo():2==b?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():(-1==b||5==b||0==b)&&"undefined"!==typeof this._player.playVideo&&this._player.playVideo()}else b?"undefined"!==typeof this._player.playVideo&& this._player.playVideo():"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},seek:function(b){this._player&&"undefined"!==typeof this._player.seekTo&&this._player.seekTo(b)},isMuted:function(){if(this._player&&"undefined"!==typeof this._player.isMuted)return this._player.isMuted()},getDuration:function(){if(this._player&&"undefined"!==typeof this._player.getDuration)return this._player.getDuration()},getCurrentTime:function(){if(this._player&&"undefined"!==typeof this._player.getCurrentTime)return this._player.getCurrentTime()}, getVideoLoadedFraction:function(){if(this._player&&"undefined"!==typeof this._player.getVideoLoadedFraction)return this._player.getVideoLoadedFraction()},getVideoBytesLoaded:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesLoaded)return this._player.getVideoBytesLoaded()},getVideoBytesTotal:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesTotal)return this._player.getVideoBytesTotal()},setVolume:function(b){0>b?vol=0:1<b&&(b=1);this._player&&"undefined"!== typeof this._player.setVolume&&this._player.setVolume(100*b)},getPlayerState:function(){if(this._player&&"undefined"!==typeof this._player.getPlayerState)return this._player.getPlayerState()}}})(jQuery);